<?php
/**
 * au
 *
 * @author DeguchiTatsuya
 * @version 1.0
 * 
 */
class Au {

	var $authRequestURL;
	var $registrationRequestURL;
	var $cancellationRequestURL;
	var $cp_cd;
	var $cp_srv_cd;
	var $item_cd;
	var $odr_id;
	var $wsdlFilePath;

	/**
	 * constructer
	 */
	function Au() {
//		if($_SERVER['HTTP_X_UP_SUBNO']) {
//		} else {
//			echo '本コンテンツをご利用になる場合は、ユーザIDを通知する必要がございます。';
//			exit();
//		}
//		
		// -stgはステージング(開発用)。本番用は-stgを取ったもの$_SERVER['HTTP_HOST']で判断して適用するようになっている。
		// DLEの設定ファイルなども同じ対応が必要。
		$this->authRequestURL = 'http://auth-stg.collect.kddi.com/mob/NSReq';
		$this->registrationRequestURL = 'http://auth-stg.collect.kddi.com/mob/KSReq';
		$this->cancellationRequestURL = 'http://auth-stg.collect.kddi.com/mob/KKReq';
		$this->cp_cd = '99999';
		$this->cp_srv_cd = '81012';
		$this->item_cd = '21102';
		$this->odr_id = 'fjprm';
		$this->wsdlFilePath = dirname(__FILE__) . '/wsdl_test/';
		
		if($_SERVER['HTTP_HOST'] == 'm.funkyjam.com') {
			$this->authRequestURL = 'http://auth.collect.kddi.com/mob/NSReq';
			$this->registrationRequestURL = 'http://auth.collect.kddi.com/mob/KSReq';
			$this->cancellationRequestURL = 'http://auth.collect.kddi.com/mob/KKReq';
			$this->cp_cd = '83621';
			$this->cp_srv_cd = '85001';
			$this->item_cd = 'fjprm';
			$this->odr_id = 'fjprm';
			$this->wsdlFilePath = dirname(__FILE__) . '/wsdl/';
		}
	}

	/**
	 * check support device user agent
	 *
	 * @return boolean
	 */
	function checkSupportUA() {
		if($_SERVER['HTTP_USER_AGENT']) {
		} else {
			return false;
		}

		// 非対応機種のデバイスID一覧(基本的にはWIN端末じゃないもの)
		// 詳しくはhttp://www.au.kddi.com/ezfactory/tec/spec/4_4.htmlを参照
		$UAList = array(
			'ST2C' => '', 'ST29' => '', 'CA28' => '',
			'ST26' => '', 'ST25' => '', 'ST22' => '',
			'TS2E' => '', 'KC2A' => '', 'SA2A' => '',
			'KC29' => '', 'ST2D' => '', 'TS2D' => '',
			'SA29' => '', 'KC28' => '', 'ST2A' => '',
			'ST28' => '', 'TS2C' => '', 'TS2B' => '',
			'KC27' => '', 'ST27' => '', 'CA27' => '',
			'TS2A' => '', 'TS29' => '', 'ST24' => '',
			'TS28' => '', 'SA27' => '', 'TS27' => '',
			'SA26' => '', 'KC24' => '', 'KC25' => '',
			'TS26' => '', 'CA26' => '', 'CA25' => '',
			'ST23' => '', 'SN25' => '', 'CA24' => '',
			'SN24' => '', 'CA23' => '', 'CA23' => '',
			'ST21' => '', 'KC22' => '', 'TS24' => '',
			'HI24' => '', 'HI23' => '', 'CA22' => '',
			'TS23' => '', 'SA22' => '', 'PT23' => '',
			'PT22' => '', 'PT21' => '', 'SN29' => '',
			'KC26' => '', 'SN27' => '', 'SN28' => '',
			'SN26' => '', 'KC23' => '', 'SA28' => '',
			'TS25' => '', 'TS25' => '', 'TS25' => '',
			'SA25' => '', 'SA24' => '', 'SN23' => '',
			'KC26' => '', 'SN21' => '', 'TS22' => '',
			'CA21' => '', 'SA21' => '', 'SN22' => '',
			'TS21' => '', 'MA21' => '', 'KC21' => '',
			'HI21' => ''
		);

		// デバイスID取得
		if(preg_match("/^KDDI/", $_SERVER['HTTP_USER_AGENT'])){
			// WAP2.0端末の場合
			preg_match("/^KDDI-(.+) UP.Browser\/.+\/.+/", $_SERVER['HTTP_USER_AGENT'], $value);
			$deviceID = $value[1];
		} elseif(preg_match("/^UP\.Browser/", $_SERVER['HTTP_USER_AGENT'])){
			// WAP1.0端末の場合
			preg_match("/^UP\.Browser\/[0-9]+\.[0-9]+\-(.+).+/", $_SERVER['HTTP_USER_AGENT'], $value);
			$deviceID = $value[1];
		} else {
			return false;
		}

		// WAP1.0以外ならOKとする。
		// WAP1.0の端末は全てUAが「UP.Browser」から始まる。
		if(preg_match('/^UP\.Browser/', $_SERVER['HTTP_USER_AGENT'])
			|| array_key_exists($deviceID, $UAList)) {
		} else {
			return true;
		}
		return false;
	}

	/**
	 * check FlashLite1.1 up support device user agent
	 *
	 * @return boolean
	 */
	function checkFlashSupportUA() {
		if($_SERVER['HTTP_USER_AGENT']) {
		} else {
			return false;
		}
		return true;
	}

	/**
	 * authentication request
	 * 
	 * @param String $ok_url
	 * @param String $ng_url
	 */
	function auth($ok_url = null, $ng_url = null) {

		if($ok_url) {
		} else {
			echo 'error';
			exit();
		}

		if($ng_url) {
		} else {
			echo 'error';
			exit();
		}
		
		$params = array(
			'cp_cd'				=> $this->getParam('cp_cd'),			//サービス提供者コード
			'cp_srv_cd'			=> $this->getParam('cp_srv_cd'),		//サービスコード
			'item_cd'			=> $this->getParam('item_cd'),		//商品コード
			'odr_id'			=> $this->getParam('odr_id'),			//サービス提供者側要求ＩＤ
			'ok_url'			=> $ok_url,			//認証成功時ＵＲＬ
			'ng_url'			=> $ng_url			//認証失敗時ＵＲＬ
		);
		
		$client = new SoapClient($this->wsdlFilePath . 'NSPrevReqN.wsdl');
		
//		var_dump($client);
//		return true;

		$response = $client->trx_NSPrevReqN($params);
		
		if(!isset($response)) {
			header('http://' . $_SERVER['HTTP_HOST'] . '/index.php?action=ng');
			exit();
		}
		$rslt_cd = $response->rslt_cd;
		$rsn_cd = $response->rsn_cd;
		$tran_id = $response->tran_id;
		
//		echo $this->wsdlFilePath . 'NSPrevReqN.wsdl' . "<BR>";
//		var_dump($response);
//		return true;

		if($rslt_cd != '00' && $rsn_cd != '001') {
			$location = sprintf('http://%s/index.php?action=ng&rslt_cd=%s&rsn_cd=%s', $_SERVER['HTTP_HOST'], $rslt_cd, $rsn_cd);
			header();
			exit();
		}
		
		$location = sprintf('Location: %s?cp_cd=%s&tran_id=%s', $this->getParam('authRequestURL'), $this->getParam('cp_cd'), $tran_id);
//		echo $location;
//		return true;
		header($location);
		exit();
	}

	/**
	 *
	 * @param String $paramName
	 * @return mixed
	 */
	function getParam($paramName) {
		if($this->$paramName) {
			return $this->$paramName;
		}
		return false;
	}

	/**
	 * check ip address
	 *
	 * @return boolean
	 */
	function checkIP() {
		if($_SERVER['REMOTE_ADDR']) {
		} else {
			return false;
		}

		// auのゲートウェイのIP一覧
		$IPList = array(
			'210.230.128.226' => '',
			'61.117.1.7' => '',
			'121.111.227.163' => '', '121.111.227.164' => '', '121.111.227.165' => '', '121.111.227.166' => '',	'121.111.227.167' => '', '121.111.227.168' => '',
			'219.108.158.26' => '', '219.125.146.2' => '', '219.125.146.3' => '', '219.125.146.4' => '',
			'219.125.146.5' => '', '219.125.146.6' => '', '219.125.146.7' => '', '219.125.146.8' => '', '219.125.146.9' => '', '219.125.146.12' => '',
			'219.125.146.13' => '',
			'61.117.2.34' => '', '61.117.2.42' => '',
			'219.108.158.42' => '', '219.108.158.44' => '',
			'222.5.62.160' => '', '222.5.62.161' => '',
			'222.5.62.162' => '', '222.5.62.163' => '', '222.5.62.164' => '', '222.5.62.165' => '', '222.5.62.166' => '', '222.5.62.167' => '',
			'222.5.62.168' => '', '222.5.62.169' => '', '222.5.62.170' => '', '222.5.62.171' => '', '222.5.62.172' => '', '222.5.62.173' => '',
			'222.5.62.174' => '', '222.5.62.175' => '', '222.5.62.176' => '', '222.5.62.177' => '', '222.5.62.178' => '', '222.5.62.179' => '',
			'222.5.62.180' => '', '222.5.62.181' => '', '222.5.62.182' => '', '222.5.62.183' => '', '222.5.62.184' => '', '222.5.62.185' => '',
			'222.5.62.186' => '', '222.5.62.187' => '', '222.5.62.188' => '', '222.5.62.189' => '', '222.5.62.190' => '', '222.5.62.191' => '',
			'222.5.62.192' => '', '222.5.62.193' => '', '222.5.62.194' => '', '222.5.62.195' => '', '222.5.62.196' => '', '222.5.62.197' => '',
			'222.5.62.198' => '', '222.5.62.199' => '', '222.5.62.200' => '', '222.5.62.201' => '', '222.5.62.202' => '', '222.5.62.203' => '',
			'222.5.62.204' => '', '222.5.62.205' => '', '222.5.62.206' => '', '222.5.62.207' => '', '222.5.62.208' => '', '222.5.62.209' => '',
			'222.5.62.210' => '', '222.5.62.211' => '', '222.5.62.212' => '', '222.5.62.213' => '', '222.5.62.214' => '', '222.5.62.215' => '',
			'222.5.62.216' => '', '222.5.62.217' => '', '222.5.62.218' => '', '222.5.62.219' => '',
			'59.135.38.131' => '', '59.135.38.132' => '', '59.135.38.133' => '', '59.135.38.134' => '', '59.135.38.135' => '', '59.135.38.136' => '',
			'59.135.38.137' => '', '59.135.38.138' => '', '59.135.38.139' => '', '59.135.38.140' => '', '59.135.38.141' => '', '59.135.38.142' => '',
			'59.135.38.143' => '', '59.135.38.144' => '', '59.135.38.145' => '', '59.135.38.146' => '', '59.135.38.147' => '', '59.135.38.148' => '',
			'59.135.38.149' => '', '59.135.38.150' => '', '59.135.38.151' => '', '59.135.38.152' => '', '59.135.38.153' => '', '59.135.38.154' => '',
			'59.135.38.155' => '', '59.135.38.156' => '', '59.135.38.157' => '', '59.135.38.158' => '', '59.135.38.159' => '', '59.135.38.160' => '',
			'59.135.38.161' => '', '59.135.38.162' => '', '59.135.38.163' => '', '59.135.38.164' => '', '59.135.38.165' => '', '59.135.38.166' => '',
			'59.135.38.167' => '', '59.135.38.168' => '', '59.135.38.169' => '', '59.135.38.170' => '', '59.135.38.171' => '', '59.135.38.172' => '',
			'59.135.38.173' => '', '59.135.38.174' => '', '59.135.38.175' => '', '59.135.38.176' => '', '59.135.38.177' => '', '59.135.38.178' => '',
			'59.135.38.179' => '', '59.135.38.180' => '', '59.135.38.181' => '', '59.135.38.182' => '', '59.135.38.183' => '', '59.135.38.184' => '',
			'59.135.38.185' => '', '59.135.38.186' => '', '59.135.38.187' => '', '59.135.38.188' => '', '59.135.38.189' => '', '59.135.38.190' => '',
			'59.135.38.191' => '', '59.135.38.192' => '', '59.135.38.193' => '', '59.135.38.194' => '', '59.135.38.195' => '', '59.135.38.196' => '',
			'59.135.38.197' => '', '59.135.38.198' => '', '59.135.38.199' => '', '59.135.38.200' => '', '59.135.38.201' => '', '59.135.38.202' => '',
			'59.135.38.203' => '', '59.135.38.204' => '', '59.135.38.205' => '', '59.135.38.206' => '', '59.135.38.207' => '', '59.135.38.208' => '',
			'59.135.38.209' => '', '59.135.38.210' => '', '59.135.38.211' => '', '59.135.38.212' => '', '59.135.38.213' => '', '59.135.38.214' => '',
			'59.135.38.215' => '', '59.135.38.216' => '', '59.135.38.217' => '', '59.135.38.218' => '', '59.135.38.219' => '','59.135.38.220' => '',
			'219.108.157.3' => '', '219.108.157.4' => '', '219.108.157.5' => '', '219.108.157.6' => '', '219.108.157.7' => '', '219.108.157.8' => '',
			'219.108.157.9' => '', '219.108.157.10' => '', '219.108.157.11' => '', '219.108.157.12' => '', '219.108.157.13' => '', '219.108.157.14' => '',
			'219.108.157.15' => '', '219.108.157.16' => '', '219.108.157.17' => '', '219.108.157.18' => '', '219.108.157.19' => '','219.108.157.20' => '',
			'219.108.157.21' => '', '219.108.157.22' => '', '219.108.157.23' => '', '219.108.157.24' => '', '219.108.157.25' => '','219.108.157.26' => '',
			'219.108.157.27' => '', '219.108.157.28' => '', '219.108.157.29' => '', '219.108.157.30' => '', '219.108.157.31' => '', '219.108.157.32' => '',
			'219.108.157.33' => '', '219.108.157.34' => '', '219.108.157.35' => '', '219.108.157.36' => '', '219.108.157.37' => '', '219.108.157.38' => '',
			'219.108.157.39' => '', '219.108.157.40' => '', '219.108.157.41' => '', '219.108.157.42' => '', '219.108.157.43' => '', '219.108.157.44' => '',
			'219.108.157.45' => '', '219.108.157.46' => '', '219.108.157.47' => '', '219.108.157.48' => '', '219.108.157.49' => '', '219.108.157.50' => '',
			'219.108.157.51' => '', '219.108.157.52' => '', '219.108.157.53' => '', '219.108.157.54' => '', '219.108.157.55' => '', '219.108.157.56' => '',
			'219.108.157.57' => '', '219.108.157.58' => '', '219.108.157.59' => '', '219.108.157.60' => '', '219.108.157.61' => '', '219.108.157.62' => '',
			'219.108.157.63' => '', '219.108.157.64' => '', '219.108.157.65' => '', '219.108.157.66' => '', '219.108.157.67' => '', '219.108.157.68' => '',
			'219.108.157.69' => '', '219.108.157.70' => '', '219.108.157.71' => '', '219.108.157.72' => '', '219.108.157.73' => '', '219.108.157.74' => '',
			'219.108.157.75' => '', '219.108.157.76' => '', '219.108.157.77' => '', '219.108.157.78' => '', '219.108.157.79' => '', '219.108.157.80' => '',
			'219.108.157.81' => '', '219.108.157.82' => '', '219.125.145.3' => '', '219.125.145.4' => '', '219.125.145.5' => '', '219.125.145.6' => '',
			'219.125.145.7' => '', '219.125.145.8' => '', '219.125.145.9' => '', '219.125.145.10' => '', '219.125.145.11' => '', '219.125.145.12' => '',
			'219.125.145.13' => '', '219.125.145.14' => '', '219.125.145.15' => '', '219.125.145.16' => '', '219.125.145.17' => '', '219.125.145.18' => '',
			'219.125.145.19' => '', '219.125.145.20' => '', '219.125.145.21' => '', '219.125.145.22' => '', '219.125.145.23' => '', '219.125.145.24' => '',
			'219.125.145.25' => '', '219.125.145.26' => '', '219.125.145.27' => '', '219.125.145.28' => '', '219.125.145.29' => '', '219.125.145.30' => '',
			'219.125.145.31' => '', '219.125.145.32' => '', '219.125.145.33' => '', '219.125.145.34' => '', '219.125.145.35' => '', '219.125.145.36' => '',
			'219.125.145.37' => '', '219.125.145.38' => '', '219.125.145.39' => '', '219.125.145.40' => '', '219.125.145.41' => '', '219.125.145.42' => '',
			'219.125.145.43' => '', '219.125.145.44' => '', '219.125.145.45' => '', '219.125.145.46' => '', '219.125.145.47' => '', '219.125.145.48' => '',
			'219.125.145.49' => '', '219.125.145.50' => '', '219.125.145.51' => '', '219.125.145.52' => '', '219.125.145.53' => '', '219.125.145.54' => '',
			'219.125.145.55' => '', '219.125.145.56' => '', '219.125.145.57' => '', '219.125.145.58' => '', '219.125.145.86' => '', '219.125.145.87' => '',
			'219.125.145.88' => '', '219.125.145.59' => '', '219.125.145.60' => '', '219.125.145.61' => '', '219.125.145.62' => '', '219.125.145.63' => '',
			'219.125.145.64' => '', '219.125.145.65' => '', '219.125.145.66' => '', '219.125.145.67' => '', '219.125.145.68' => '', '219.125.145.69' => '',
			'219.125.145.70' => '', '219.125.145.71' => '', '219.125.145.72' => '', '219.125.145.73' => '', '219.125.145.74' => '', '219.125.145.89' => '',
			'219.125.145.90' => '', '219.125.145.91' => '',
			'121.111.231.3' => '', '121.111.231.4' => '', '121.111.231.5' => '', '121.111.231.6' => '', '121.111.231.7' => '', '121.111.231.8' => '',
			'121.111.231.9' => '', '121.111.231.10' => '', '121.111.231.11' => '', '121.111.231.12' => '', '121.111.231.13' => '', '121.111.231.14' => '',
			'121.111.231.15' => '', '121.111.231.16' => '', '121.111.231.17' => '', '121.111.231.18' => '', '121.111.231.99' => '', '121.111.231.100' => '',
			'121.111.231.101' => '', '121.111.231.19' => '', '121.111.231.20' => '', '121.111.231.21' => '', '121.111.231.22' => '','121.111.231.23' => '',
			'121.111.231.24' => '', '121.111.231.25' => '', '121.111.231.26' => '','121.111.231.27' => '', '121.111.231.28' => '', '121.111.231.29' => '',
			'121.111.231.30' => '', '121.111.231.31' => '', '121.111.231.32' => '', '121.111.231.33' => '', '121.111.231.34' => '', '121.111.231.102' => '',
			'121.111.231.103' => '', '121.111.231.104' => '', '121.111.231.35' => '', '121.111.231.36' => '', '121.111.231.37' => '', '121.111.231.38' => '',
			'121.111.231.39' => '', '121.111.231.40' => '', '121.111.231.41' => '', '121.111.231.42' => '', '121.111.231.43' => '', '121.111.231.44' => '',
			'121.111.231.45' => '', '121.111.231.46' => '', '121.111.231.47' => '', '121.111.231.48' => '', '121.111.231.49' => '', '121.111.231.50' => '',
			'121.111.231.105' => '', '121.111.231.106' => '', '121.111.231.107' => '', '121.111.231.51' => '', '121.111.231.52' => '', '121.111.231.53' => '',
			'121.111.231.54' => '', '121.111.231.55' => '', '121.111.231.56' => '', '121.111.231.57' => '', '121.111.231.58' => '', '121.111.231.59' => '',
			'121.111.231.60' => '', '121.111.231.61' => '', '121.111.231.62' => '', '121.111.231.63' => '', '121.111.231.64' => '', '121.111.231.65' => '',
			'121.111.231.66' => '', '121.111.231.67' => '', '121.111.231.68' => '', '121.111.231.69' => '', '121.111.231.70' => '', '121.111.231.71' => '',
			'121.111.231.72' => '', '121.111.231.73' => '', '121.111.231.74' => '', '121.111.231.75' => '', '121.111.231.76' => '', '121.111.231.77' => '',
			'121.111.231.78' => '', '121.111.231.79' => '', '121.111.231.80' => '', '121.111.231.81' => '', '121.111.231.82' => '', '121.111.231.83' => '',
			'121.111.231.84' => '', '121.111.231.85' => '', '121.111.231.86' => '', '121.111.231.87' => '', '121.111.231.88' => '', '121.111.231.89' => '',
			'121.111.231.90' => '', '121.111.231.91' => '', '121.111.231.92' => '', '121.111.231.93' => '', '121.111.231.94' => '', '121.111.231.95' => '',
			'121.111.231.96' => '', '121.111.231.97' => '', '121.111.231.98' => '', '121.111.227.3' => '', '121.111.227.4' => '', '121.111.227.5' => '',
			'121.111.227.6' => '', '121.111.227.7' => '', '121.111.227.8' => '', '121.111.227.9' => '', '121.111.227.10' => '', '121.111.227.11' => '',
			'121.111.227.12' => '', '121.111.227.13' => '', '121.111.227.14' => '', '121.111.227.15' => '', '121.111.227.16' => '', '121.111.227.17' => '',
			'121.111.227.18' => '', '121.111.227.19' => '', '121.111.227.20' => '', '121.111.227.21' => '', '121.111.227.22' => '', '121.111.227.23' => '',
			'121.111.227.24' => '', '121.111.227.25' => '', '121.111.227.26' => '', '121.111.227.27' => '', '121.111.227.28' => '', '121.111.227.29' => '',
			'121.111.227.30' => '', '121.111.227.31' => '', '121.111.227.32' => '', '121.111.227.33' => '', '121.111.227.34' => '', '121.111.227.35' => '',
			'121.111.227.36' => '', '121.111.227.37' => '', '121.111.227.38' => '', '121.111.227.39' => '', '121.111.227.40' => '', '121.111.227.41' => '',
			'121.111.227.42' => '', '121.111.227.43' => '', '121.111.227.44' => '', '121.111.227.45' => '', '121.111.227.46' => '', '121.111.227.47' => '',
			'121.111.227.48' => '', '121.111.227.49' => '', '121.111.227.50' => '',
			'118.152.214.195' => '', '118.152.214.196' => '', '118.152.214.197' => '', '118.152.214.198' => '', '118.152.214.199' => '', '118.152.214.200' => '',
			'118.152.214.201' => '', '118.152.214.202' => '', '118.152.214.203' => '', '118.152.214.204' => '', '118.152.214.205' => '', '118.152.214.206' => '',
			'118.152.214.207' => '', '118.152.214.208' => '', '118.152.214.209' => '', '118.152.214.210' => '', '118.152.214.211' => '', '118.152.214.212' => '',
			'118.152.214.215' => '', '118.152.214.216' => '', '118.152.214.217' => '', '118.152.214.218' => '', '118.152.214.219' => '', '118.152.214.220' => '',
			'118.152.214.221' => '', '118.159.131.3' => '', '118.159.131.4' => '', '118.159.131.5' => '', '118.159.131.6' => '', '118.159.131.7' => '',
			'118.159.131.8' => '', '118.159.131.9' => '', '118.159.131.10' => '', '118.159.131.11' => '', '118.159.131.12' => '', '118.159.131.13' => '',
			'118.159.131.14' => '', '118.159.131.15' => '', '118.159.131.16' => '', '118.159.131.17' => '', '118.159.131.18' => '', '118.159.131.19' => '',
			'118.159.131.20' => '', '118.159.131.21' => '', '118.159.131.22' => '', '118.159.131.23' => '', '118.159.131.24' => '', '118.159.131.25' => '',
			'118.159.131.26' => '', '118.159.131.27' => '', '118.159.131.28' => '', '118.159.131.29' => '', '118.159.131.30' => '', '118.159.131.31' => '',
			'118.159.131.32' => '', '118.159.131.33' => '', '118.159.131.34' => '', '118.159.131.35' => '', '118.159.131.36' => '', '118.159.131.37' => '',
			'118.159.131.38' => '', '118.159.131.39' => '', '118.159.131.40' => '', '118.159.131.41' => '', '118.159.131.42' => '', '118.159.131.43' => '',
			'118.159.131.44' => '', '118.159.131.45' => '', '118.159.131.46' => '', '118.159.131.47' => '', '118.159.133.3' => '', '118.159.133.4' => '',
			'118.159.133.5' => '', '118.159.133.6' => '', '118.159.133.7' => '', '118.159.133.8' => '', '118.159.133.9' => '', '118.159.133.10' => '',
			'118.159.133.11' => '', '118.159.133.12' => '', '118.159.133.13' => '', '118.159.133.14' => '', '118.159.133.15' => '', '118.159.133.16' => '',
			'118.159.133.17' => '', '118.159.133.18' => '', '118.159.133.19' => '', '118.159.133.20' => '', '118.159.133.21' => '', '118.159.133.22' => '',
			'118.159.133.23' => '', '118.159.133.24' => '', '118.159.133.25' => '', '118.159.133.26' => '', '118.159.133.27' => '', '118.159.133.28' => '',
			'118.159.133.29' => '', '118.159.133.30' => '', '118.159.133.31' => '', '118.159.133.32' => '', '118.159.133.33' => '', '118.159.133.34' => '',
			'118.159.133.35' => '', '118.159.133.36' => '',
			'121.111.227.51' => '', '121.111.227.52' => '', '121.111.227.53' => '', '121.111.227.54' => '', '121.111.227.55' => '', '121.111.227.56' => '',
			'121.111.227.57' => '', '121.111.227.58' => '', '121.111.227.59' => '', '121.111.227.60' => '', '121.111.227.61' => '', '121.111.227.62' => '',
			'121.111.227.63' => '', '121.111.227.64' => '', '121.111.227.65' => '', '121.111.227.66' => '', '121.111.227.67' => '', '121.111.227.68' => '',
			'121.111.227.69' => '', '121.111.227.70' => '', '121.111.227.71' => '', '121.111.227.72' => '', '121.111.227.73' => '', '121.111.227.74' => '',
			'121.111.227.75' => '', '121.111.227.76' => '', '121.111.227.77' => '', '121.111.227.78' => '', '121.111.227.79' => '', '121.111.227.80' => '',
			'121.111.227.81' => '', '121.111.227.82' => '', '121.111.227.83' => '', '121.111.227.84' => '',
			'118.159.132.163' => '', '118.159.132.164' => '', '118.159.132.165' => '', '118.159.132.166' => '', '118.159.132.167' => '', '118.159.132.168' => '',
			'118.159.132.169' => '', '118.159.132.170' => '', '118.159.132.171' => '', '118.159.132.172' => '', '118.159.132.173' => '', '118.159.132.174' => '',
			'118.159.132.175' => '', '118.159.132.176' => '', '118.159.132.177' => '', '118.159.132.178' => '', '118.159.132.179' => '',
			'111.86.142.3' => '', '111.86.142.4' => '', '111.86.142.5' => '', '111.86.142.6' => '', '111.86.142.7' => '', '111.86.142.8' => '', '111.86.142.9' => '',
			'111.86.142.10' => '', '111.86.142.11' => '', '111.86.142.12' => '', '111.86.142.13' => '', '111.86.142.14' => '', '111.86.142.15' => '',
			'111.86.142.16' => '', '111.86.142.17' => '', '111.86.142.18' => '', '111.86.142.19' => '', '111.86.142.20' => '', '111.86.142.21' => '',
			'111.86.142.22' => '', '111.86.142.23' => '', '111.86.142.24' => '', '111.86.142.25' => '', '111.86.142.26' => '', '111.86.141.67' => '',
			'111.86.141.68' => '', '111.86.141.69' => '', '111.86.141.70' => '', '111.86.141.71' => '', '111.86.141.72' => '', '111.86.141.73' => '',
			'111.86.141.74' => '', '111.86.141.75' => '', '111.86.141.76' => '', '111.86.141.77' => '', '111.86.141.78' => '', '111.86.141.79' => '',
			'111.86.141.80' => '', '111.86.141.81' => '', '111.86.141.82' => '', '111.86.141.83' => '', '111.86.141.84' => '', '111.86.141.85' => '',
			'111.86.141.86' => '', '111.86.141.87' => '', '111.86.141.88' => '', '111.86.141.89' => '', '111.86.141.90' => '', '111.86.141.131' => '',
			'111.86.141.132' => '', '111.86.141.133' => '', '111.86.141.134' => '', '111.86.141.135' => '', '111.86.141.136' => '', '111.86.141.137' => '',
			'111.86.141.138' => '', '111.86.141.139' => '', '111.86.141.140' => '', '111.86.141.141' => '', '111.86.141.142' => '', '111.86.141.143' => '',
			'111.86.141.144' => '', '111.86.141.145' => '', '111.86.141.146' => '', '111.86.141.147' => '', '111.86.141.148' => '', '111.86.141.149' => '',
			'111.86.141.150' => '', '111.86.141.151' => '', '111.86.141.152' => '', '111.86.141.153' => '', '111.86.141.154' => '', '111.86.141.195' => '',
			'111.86.141.196' => '', '111.86.141.197' => '', '111.86.141.198' => '', '111.86.141.199' => '', '111.86.141.200' => '', '111.86.141.201' => '',
			'111.86.141.202' => '', '111.86.141.203' => '', '111.86.141.204' => '', '111.86.141.205' => '', '111.86.141.206' => '', '111.86.141.207' => '',
			'111.86.141.208' => '', '111.86.141.209' => '', '111.86.141.210' => '', '111.86.141.211' => '', '111.86.141.212' => '', '111.86.141.213' => '',
			'111.86.141.214' => '', '111.86.141.215' => '', '111.86.141.216' => '', '111.86.141.217' => '', '111.86.141.218' => '',
			'222.5.62.131' => '', '222.5.62.132' => '', '222.5.62.133' => '', '222.5.62.134' => '', '222.5.62.135' => '', '219.125.148.35' => '',
			'219.125.148.36' => '',
			'59.135.38.244' => '', '59.135.38.245' => '', '59.135.38.246' => '', '59.135.38.247' => '', '59.135.38.248' => '', '59.135.38.237' => '',
			'59.135.38.238' => '', '59.135.38.239' => '', '59.135.38.240' => '', '59.135.38.241' => '', '59.135.38.242' => '', '59.135.38.243' => '',
			'219.125.145.75' => '', '219.125.145.76' => '', '219.125.145.77' => '', '219.125.145.78' => '', '219.125.145.79' => '', '219.125.145.80' => '',
			'219.125.145.81' => '', '219.125.145.82' => '', '219.125.145.83' => '', '219.125.145.84' => '', '219.125.145.85' => '',
			'59.135.38.249' => '', '59.135.38.250' => '',
			'118.159.133.195' => '', '118.159.133.196' => '', '118.159.133.197' => '', '118.159.133.198' => '', '118.159.133.199' => '', '118.159.133.200' => '', //2010年 7月 予定
			'118.159.133.201' => '', '118.159.133.202' => '', '118.159.133.203' => '', '118.159.133.204' => '', '118.159.133.205' => '', '118.159.133.206' => '', //2010年 7月 予定
			'118.159.133.207' => '', '118.159.133.208' => '', '118.159.133.209' => '', '118.159.133.210' => '', '118.159.133.211' => '', '118.159.133.212' => '', //2010年 7月 予定
			'118.159.133.213' => '', '118.159.133.214' => '', '118.159.133.215' => '', '118.159.133.216' => '', '118.159.133.217' => '', '118.159.133.218' => '', //2010年 7月 予定
			'111.86.142.133' => '', '111.86.142.134' => '', '111.86.142.135' => '', '111.86.142.136' => '', '111.86.142.137' => '', '111.86.142.138' => '', //2010年 10月
			'111.86.142.139' => '', '111.86.142.140' => '', '111.86.142.141' => '', '111.86.142.142' => '', '111.86.142.143' => '','111.86.142.144' => '', //2010年 10月
			'111.86.142.197' => '', '111.86.142.198' => '', '111.86.142.199' => '', '111.86.142.200' => '', '111.86.142.201' => '', '111.86.142.202' => '', //2010年 10月
			'111.86.142.203' => '', '111.86.142.204' => '', '111.86.142.205' => '', '111.86.142.206' => '', '111.86.142.207' => '','111.86.142.208' => '', //2010年 10月
			'111.86.143.5' => '', '111.86.143.6' => '', '111.86.143.7' => '', '111.86.143.8' => '', '111.86.143.9' => '', '111.86.143.10' => '', //2010年 10月
			'111.86.143.11' => '', '111.86.143.12' => '', '111.86.143.13' => '', '111.86.143.14' => '', '111.86.143.15' => '', '111.86.143.16' => '', //2010年 10月
			'111.86.143.195' => '', '111.86.143.196' => '',  '111.86.143.197' => '', '111.86.143.198' => '', '111.86.143.199' => '', '111.86.143.200' => '', //2010年 10月
			'111.86.143.201' => '', '111.86.143.202' => '', '111.86.143.203' => '', '111.86.143.204' => '', '111.86.143.205' => '', '111.86.143.206' => '', //2010年 10月
			'111.86.143.207' => '', '111.86.143.208' => '', '111.86.143.209' => '', '111.86.143.210' => '', '111.86.143.211' => '', '111.86.143.212' => '', //2010年 10月
			'111.86.143.213' => '', '111.86.143.214' => '', '111.86.143.215' => '', '111.86.143.216' => '', '111.86.143.217' => '', '111.86.143.218' => '', //2010年 10月
			'111.86.143.219' => '', '111.86.143.220' => '', '111.86.143.221' => '', '111.86.143.222' => '', '111.86.143.223' => '', '111.86.143.224' => '', //2010年 10月
			'111.86.143.225' => '', '111.86.143.226' => '', '111.86.143.227' => '', '111.86.143.228' => '', '111.86.143.229' => '', '111.86.143.230' => '', //2010年 10月
			'111.86.143.231' => '', '111.86.143.232' => '', '111.86.143.233' => '', '111.86.143.234' => '', '111.86.143.235' => '', '111.86.143.236' => '', //2010年 10月
			'111.86.143.237' => '', '111.86.143.238' => '', '111.86.143.239' => '', '111.86.143.240' => '', '111.86.143.241' => '', '111.86.143.242' => '', //2010年 10月
			'111.86.147.3' => '', '111.86.147.4' => '', '111.86.147.5' => '', '111.86.147.6' => '', '111.86.147.7' => '', '111.86.147.8' => '', //2010年 10月
			'111.86.147.9' => '', '111.86.147.10' => '', '111.86.147.11' => '', '111.86.147.12' => '', '111.86.147.13' => '', '111.86.147.14' => '', //2010年 10月
			'111.86.147.15' => '', '111.86.147.16' => '', '111.86.147.17' => '', '111.86.147.18' => '', //2010年 10月
			'111.86.147.35' => '', '111.86.147.36' => '', '111.86.147.37' => '', '111.86.147.38' => '', '111.86.147.39' => '', '111.86.147.40' => '', //2011年 1月
			'111.86.147.41' => '', '111.86.147.42' => '', '111.86.147.43' => '', '111.86.147.44' => '', '111.86.147.45' => '', '111.86.147.46' => '', //2011年 1月
			'111.86.147.47' => '', '111.86.147.48' => '', '111.86.147.49' => '', '111.86.147.50' => '', //2011年 1月
			'111.86.147.67' => '', '111.86.147.68' => '', '111.86.147.69' => '', '111.86.147.70' => '', '111.86.147.71' => '', '111.86.147.72' => '', //2011年 1月
			'111.86.147.73' => '', '111.86.147.74' => '', '111.86.147.75' => '', '111.86.147.76' => '', '111.86.147.77' => '', '111.86.147.78' => '', //2011年 1月
			'111.86.147.79' => '', '111.86.147.80' => '', '111.86.147.81' => '', '111.86.147.82' => '', //2011年 1月
			'111.86.147.99' => '', '111.86.147.100' => '', '111.86.147.101' => '', '111.86.147.102' => '', '111.86.147.103' => '', '111.86.147.104' => '', //2011年 1月
			'111.86.147.105' => '', '111.86.147.106' => '', '111.86.147.107' => '', '111.86.147.108' => '', '111.86.147.109' => '', '111.86.147.110' => '', //2011年 1月
			'111.86.147.111' => '', '111.86.147.112' => '', '111.86.147.113' => '', '111.86.147.114' => '', //2011年 1月
			'111.86.147.131' => '', '111.86.147.132' => '', '111.86.147.133' => '', '111.86.147.134' => '', '111.86.147.135' => '', '111.86.147.136' => '', //2011年 1月
			'111.86.147.137' => '', '111.86.147.138' => '', '111.86.147.139' => '', '111.86.147.140' => '', '111.86.147.141' => '', '111.86.147.142' => '', //2011年 1月
			'111.86.147.143' => '', '111.86.147.144' => '', '111.86.147.145' => '', '111.86.147.146' => '', //2011年 1月
			'111.86.147.163' => '', '111.86.147.164' => '',  '111.86.147.165' => '', '111.86.147.166' => '', '111.86.147.167' => '', '111.86.147.168' => '', //2011年 1月
			'111.86.147.169' => '', '111.86.147.170' => '', '111.86.147.171' => '', '111.86.147.172' => '', '111.86.147.173' => '', '111.86.147.174' => '', //2011年 1月
			'111.86.147.175' => '', '111.86.147.176' => '', '111.86.147.177' => '', '111.86.147.178' => '', //2011年 1月
			'111.86.147.195' => '', '111.86.147.196' => '', '111.86.147.197' => '', '111.86.147.198' => '', '111.86.147.199' => '', '111.86.147.200' => '', //2011年 1月
			'111.86.147.201' => '', '111.86.147.202' => '', '111.86.147.203' => '', '111.86.147.204' => '', '111.86.147.205' => '', '111.86.147.206' => '', //2011年 1月
			'111.86.147.207' => '', '111.86.147.208' => '', '111.86.147.209' => '', '111.86.147.210' => '', //2011年 1月
			'111.86.147.227' => '', '111.86.147.228' => '', '111.86.147.229' => '', '111.86.147.230' => '', '111.86.147.231' => '', '111.86.147.232' => '', //2011年 1月
			'111.86.147.233' => '', '111.86.147.234' => '', '111.86.147.235' => '', '111.86.147.236' => '', '111.86.147.237' => '', '111.86.147.238' => '', //2011年 1月
			'111.86.147.239' => '', '111.86.147.240' => '', '111.86.147.241' => '', '111.86.147.242' => '', //2011年 1月
			'111.86.142.165' => '', '111.86.142.166' => '', '111.86.142.167' => '', '111.86.142.168' => '','111.86.142.169' => '', '111.86.142.170' => '', //2010年 11月
			'111.86.142.171' => '', '111.86.142.172' => '', '111.86.142.173' => '', '111.86.142.174' => '', '111.86.142.175' => '', '111.86.142.176' => '', //2010年 11月
			'111.86.142.229' => '', '111.86.142.230' => '', '111.86.142.231' => '', '111.86.142.232' => '', '111.86.142.233' => '', '111.86.142.234' => '', //2010年 11月
			'111.86.142.235' => '', '111.86.142.236' => '', '111.86.142.237' => '', '111.86.142.238' => '', '111.86.142.239' => '', '111.86.142.240' => '', //2010年 11月
			'111.86.143.37' => '', '111.86.143.38' => '', '111.86.143.39' => '', '111.86.143.40' => '', '111.86.143.41' => '', '111.86.143.42' => '', //2010年 11月
			'111.86.143.43' => '', '111.86.143.44' => '', '111.86.143.45' => '', '111.86.143.46' => '', '111.86.143.47' => '', '111.86.143.48' => '', //2010年 11月
			'111.107.116.193' => '', '111.107.116.194' => '', '111.107.116.195' => '', '111.107.116.196' => '', '111.107.116.197' => '', //2011年 3月
			'111.107.116.1' => '', '111.107.116.2' => '', '111.107.116.3' => '',  '111.107.116.4' => '', '111.107.116.5' => '', '111.107.116.6' => '', //2011年 7月
			'111.107.116.7' => '', '111.107.116.8' => '', '111.107.116.9' => '', '111.107.116.10' => '', '111.107.116.11' => '', '111.107.116.12' => '', //2011年 7月
			'111.107.116.13' => '', '111.107.116.14' => '', '111.107.116.15' => '', '111.107.116.16' => '', '111.107.116.17' => '', '111.107.116.18' => '', //2011年 7月
			'111.107.116.19' => '', '111.107.116.20' => '', '111.107.116.21' => '', '111.107.116.22' => '', '111.107.116.23' => '', //2011年 7月
			'111.107.116.65' => '', '111.107.116.66' => '', '111.107.116.67' => '', '111.107.116.68' => '', '111.107.116.69' => '', '111.107.116.70' => '', //2011年 7月
			'111.107.116.71' => '', '111.107.116.72' => '', '111.107.116.73' => '', '111.107.116.74' => '', '111.107.116.75' => '', '111.107.116.76' => '', //2011年 7月
			'111.107.116.77' => '', '111.107.116.78' => '', //2011年 7月
		);

		// auのゲートウェイIPならばOKとする。
		if(array_key_exists($_SERVER['REMOTE_ADDR'], $IPList)) {
			return true;
		}
		return false;
	}
}
?>
